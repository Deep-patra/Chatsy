'use client'

import { useEffect, useState } from 'react'
import { useRouter } from 'next/navigation'
import { motion } from 'framer-motion'

function InternetIcon() {
  return (
    <svg
      version="1.0"
      xmlns="http://www.w3.org/2000/svg"
      width="100%"
      height="100%"
      viewBox="0 0 512.000000 512.000000"
      preserveAspectRatio="xMidYMid meet"
    >
      <g
        transform="translate(0.000000,512.000000) scale(0.100000,-0.100000)"
        fill="#fff"
        stroke="none"
      >
        <path
          d="M2400 5114 c-19 -2 -78 -9 -130 -15 -128 -14 -309 -53 -450 -96 -574
-174 -1082 -552 -1413 -1053 -85 -128 -213 -388 -262 -529 -166 -485 -188
-1023 -62 -1513 86 -331 250 -659 467 -933 97 -123 322 -341 451 -437 283
-212 587 -361 913 -448 708 -189 1432 -74 2039 326 124 81 129 84 187 84 74 0
114 28 112 80 -2 68 22 64 -545 70 l-512 5 -61 28 c-77 36 -145 104 -181 182
l-28 60 0 755 0 755 26 55 c39 82 90 135 167 172 l67 33 739 3 c815 3 794 4
890 -59 63 -42 111 -109 136 -189 20 -64 21 -86 18 -795 l-3 -730 -26 -56
c-68 -144 -193 -218 -369 -219 -84 0 -110 -16 -110 -70 0 -78 88 -100 255 -65
104 22 171 59 251 139 80 80 125 163 143 261 14 77 14 1696 1 1857 -38 431
-185 853 -420 1205 -87 130 -118 163 -157 163 -30 0 -73 -42 -73 -72 0 -13 27
-61 60 -107 229 -321 369 -672 425 -1066 8 -55 15 -117 15 -138 l0 -37 -57 39
c-114 76 -151 85 -395 89 l-217 4 -5 26 c-3 15 -8 59 -11 97 -19 203 -83 502
-155 716 -60 181 -167 422 -237 532 -13 21 -23 40 -21 42 5 6 281 95 293 95 6
0 29 -18 50 -41 70 -72 126 -85 160 -36 32 45 20 70 -75 160 -360 343 -839
574 -1350 652 -100 15 -464 28 -540 19z m207 -161 c87 -41 186 -249 273 -571
18 -67 30 -126 26 -130 -10 -9 -682 -9 -692 0 -9 10 38 192 88 338 69 202 144
331 210 363 42 21 52 21 95 0z m-369 -119 c-51 -106 -122 -314 -159 -466 -22
-95 -24 -98 -51 -98 -68 0 -494 75 -511 90 -19 17 208 261 332 355 35 26 100
69 146 95 83 48 247 119 275 120 12 0 4 -24 -32 -96z m674 75 c148 -50 326
-159 466 -286 95 -86 237 -252 225 -263 -16 -15 -441 -90 -511 -90 -27 0 -29
3 -51 98 -37 155 -109 365 -161 467 -26 52 -43 95 -38 95 5 0 36 -9 70 -21z
m563 -119 c54 -22 146 -65 204 -96 113 -59 331 -200 331 -213 0 -4 -48 -23
-107 -41 -60 -18 -113 -35 -119 -37 -5 -2 -39 33 -74 79 -79 101 -183 212
-273 290 -37 32 -66 58 -64 58 2 0 48 -18 102 -40z m-1852 -74 c-60 -58 -147
-152 -194 -210 -46 -59 -88 -105 -94 -103 -5 2 -58 19 -117 37 -60 18 -108 36
-108 40 0 9 229 159 312 204 68 38 285 135 302 136 5 0 -41 -47 -101 -104z
m-508 -401 c76 -25 140 -47 143 -49 2 -2 -8 -22 -21 -43 -129 -204 -272 -586
-336 -898 -42 -203 -81 -521 -81 -667 0 -17 -23 -18 -336 -18 l-336 0 7 68
c23 248 53 403 116 600 89 272 225 524 410 757 75 96 267 295 284 295 6 0 74
-20 150 -45z m751 -176 c175 -26 162 -13 139 -134 -47 -246 -92 -744 -102
-1117 l-6 -247 -199 -3 c-196 -3 -200 -3 -219 -27 -22 -28 -25 -69 -5 -97 13
-17 31 -19 218 -24 l203 -5 7 -244 c11 -375 44 -752 93 -1059 14 -84 25 -159
25 -166 0 -9 -20 -16 -62 -20 -96 -11 -290 -44 -422 -73 l-118 -26 -20 24
c-39 49 -198 389 -243 519 -104 302 -168 647 -177 945 l-3 100 121 3 c106 2
124 5 139 22 25 28 23 76 -4 103 -19 20 -34 22 -142 25 l-120 4 6 91 c37 559
156 998 376 1388 l60 105 150 -32 c83 -18 220 -43 305 -55z m1912 -34 c182
-330 310 -762 356 -1202 l5 -53 -458 0 -459 0 -6 143 c-17 341 -50 687 -91
945 -14 84 -25 159 -25 166 0 9 37 18 123 30 126 17 467 83 476 91 6 7 20 -15
79 -120z m-804 -175 c48 -301 78 -616 91 -950 l7 -165 -65 -43 c-36 -23 -83
-62 -105 -87 l-40 -45 -407 0 -408 0 6 243 c10 379 40 723 93 1052 l26 160
388 0 388 0 26 -165z m-2154 -1461 c0 -69 24 -334 41 -448 58 -403 196 -818
369 -1110 17 -30 30 -55 28 -56 -2 -1 -67 -23 -145 -49 l-143 -48 -28 21 c-42
30 -184 181 -267 286 -252 315 -422 694 -489 1090 -20 115 -38 313 -31 326 4
5 140 9 336 9 326 0 329 0 329 -21z m1964 4 c-5 -10 -10 -339 -12 -730 l-3
-713 -223 0 c-123 0 -257 -3 -298 -6 l-75 -7 -27 169 c-54 347 -83 676 -93
1057 l-6 247 372 0 c352 0 373 -1 365 -17z m6 -1607 c0 -8 18 -50 41 -95 l41
-80 -37 -113 c-88 -268 -195 -428 -286 -428 -31 0 -106 80 -152 162 -68 122
-159 379 -182 515 l-7 42 39 4 c21 2 152 4 291 5 212 2 252 0 252 -12z m-700
-151 c44 -174 91 -310 150 -428 l49 -99 -27 7 c-101 24 -288 119 -397 201
-139 103 -369 344 -348 364 15 15 266 61 503 93 14 2 28 1 31 -2 3 -4 21 -64
39 -136z m-682 -72 c77 -102 180 -212 266 -286 44 -38 60 -57 45 -52 -51 15
-168 69 -278 125 -113 59 -331 199 -331 212 0 7 201 75 227 77 7 1 39 -34 71
-76z m1646 -88 c66 -32 172 -55 259 -55 l69 0 -54 -46 c-67 -58 -195 -143
-273 -182 -59 -29 -197 -82 -215 -82 -5 0 11 38 35 85 24 47 61 135 82 195 21
61 40 110 42 110 2 0 27 -11 55 -25z m731 -68 c-67 -45 -227 -123 -365 -177
l-55 -21 45 37 c25 21 77 69 115 106 l70 68 105 0 c90 0 102 -2 85 -13z"
        />
        <path
          d="M3365 2370 c-75 -37 -125 -116 -125 -200 0 -84 16 -107 204 -298
l180 -182 -171 -173 c-117 -117 -178 -186 -192 -217 -48 -106 -3 -238 99 -290
57 -29 105 -33 168 -15 53 16 69 29 237 196 l181 179 169 -170 c187 -188 224
-213 311 -212 169 1 274 174 198 325 -9 17 -93 110 -187 204 l-171 173 175
177 c139 141 180 188 194 225 35 94 -3 210 -87 265 -32 21 -56 28 -108 31 -98
6 -127 -13 -325 -209 l-170 -169 -160 161 c-187 188 -233 219 -320 219 -39 -1
-74 -8 -100 -20z m330 -330 c201 -199 211 -206 270 -200 11 1 110 91 221 201
187 185 204 199 237 199 44 0 77 -31 77 -73 0 -25 -32 -62 -205 -237 -220
-222 -227 -233 -189 -290 10 -14 102 -111 205 -216 187 -188 199 -205 183
-249 -10 -26 -63 -45 -94 -33 -14 5 -113 97 -221 204 -186 185 -197 194 -234
194 -37 0 -48 -9 -239 -199 -111 -109 -211 -201 -222 -205 -53 -16 -103 35
-89 91 4 18 78 100 207 230 l201 202 -6 38 c-5 31 -35 65 -207 238 -176 177
-200 205 -200 233 0 41 31 72 72 72 28 0 56 -24 233 -200z"
        />
      </g>
    </svg>
  )
}

export default function NoInternet() {
  const [show, toggle] = useState<boolean>(false)
  const router = useRouter()

  const handleRetry = () => {
    if (navigator.onLine) router.push('/home')
  }

  useEffect(() => {
    const offlineHandler = () => {
      toggle(true)
    }

    const onlineHandler = () => {
      toggle(false)
    }

    window.addEventListener('offline', offlineHandler)
    window.addEventListener('online', onlineHandler)

    return () => {
      window.removeEventListener('online', onlineHandler)
      window.removeEventListener('offline', offlineHandler)
    }
  })

  return (
    <>
      {show ? (
        <div className="w-screen h-screen fixed top-0 left-0 flex flex-col items-center justify-center gap-3 z-[1000] bg-black1">
          <div className="relative w-24 h-24">
            <InternetIcon />
          </div>
          <div>
            <span className="text-base text-white2">
              No Internet Connection is Available.
            </span>
          </div>

          <div>
            <motion.button
              type="button"
              whileHover={{ scale: 1.1 }}
              whileTap={{ scale: 0.9 }}
              className="border-solid border border-white3 text-white3 p-2 px-3 rounded-md hover:bg-white3 hover:text-black1"
              aria-label="Retry button"
              onClick={handleRetry}
            >
              Retry
            </motion.button>
          </div>
        </div>
      ) : null}
    </>
  )
}
